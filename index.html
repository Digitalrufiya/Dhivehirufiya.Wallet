<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Burn DRF Tokens</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; background: #f4f4f4; }
    input, button { padding: 10px; margin-top: 10px; }
    #status { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>

  <h2>🔥 Burn Your DRF Tokens</h2>
  <p>Enter the amount of DRF you want to permanently destroy (burn).</p>

  <button onclick="connectWallet()">Connect Wallet</button>
  <p id="walletAddress"></p>

  <input type="number" id="amountToBurn" placeholder="Enter DRF amount">
  <br>
  <button onclick="burnDRF()">Burn DRF</button>

  <div id="status"></div>

  <script>
    const DRF_CONTRACT = "YOUR_DRF_CONTRACT_ADDRESS_HERE";
    const BURN_ADDRESS = "0x000000000000000000000000000000000000dEaD";

    const ABI = [
      { "constant": false, "inputs": [ { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "transfer", "outputs": [ { "name": "", "type": "bool" } ], "type": "function" },
      { "constant": true, "inputs": [], "name": "decimals", "outputs": [ { "name": "", "type": "uint8" } ], "type": "function" }
    ];

    let web3, account;

    async function connectWallet() {
      if (window.ethereum) {
        web3 = new Web3(window.ethereum);
        await window.ethereum.request({ method: 'eth_requestAccounts' });
        const accounts = await web3.eth.getAccounts();
        account = accounts[0];
        document.getElementById("walletAddress").innerText = "Connected: " + account;
      } else {
        alert("Please install MetaMask to use this feature.");
      }
    }

    async function burnDRF() {
      const amount = parseFloat(document.getElementById("amountToBurn").value);
      if (!amount || amount <= 0) {
        alert("Enter a valid amount.");
        return;
      }

      const contract = new web3.eth.Contract(ABI, DRF_CONTRACT);
      const decimals = await contract.methods.decimals().call();
      const amountToBurn = web3.utils.toBN(amount * 10 ** decimals);

      const confirmed = confirm(`Are you sure you want to permanently burn ${amount} DRF? This cannot be undone.`);
      if (!confirmed) return;

      document.getElementById("status").innerText = "⏳ Sending transaction...";

      try {
        await contract.methods.transfer(BURN_ADDRESS, amountToBurn.toString()).send({ from: account });
        document.getElementById("status").innerText = `✅ Burn successful! ${amount} DRF has been destroyed.`;
      } catch (error) {
        console.error(error);
        document.getElementById("status").innerText = "❌ Burn failed. See console for details.";
      }
    }
  </script>

</body>
</html>
